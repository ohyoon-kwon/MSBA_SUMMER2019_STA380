\documentclass[]{article}
\usepackage{lmodern}
\usepackage{amssymb,amsmath}
\usepackage{ifxetex,ifluatex}
\usepackage{fixltx2e} % provides \textsubscript
\ifnum 0\ifxetex 1\fi\ifluatex 1\fi=0 % if pdftex
  \usepackage[T1]{fontenc}
  \usepackage[utf8]{inputenc}
\else % if luatex or xelatex
  \ifxetex
    \usepackage{mathspec}
  \else
    \usepackage{fontspec}
  \fi
  \defaultfontfeatures{Ligatures=TeX,Scale=MatchLowercase}
\fi
% use upquote if available, for straight quotes in verbatim environments
\IfFileExists{upquote.sty}{\usepackage{upquote}}{}
% use microtype if available
\IfFileExists{microtype.sty}{%
\usepackage{microtype}
\UseMicrotypeSet[protrusion]{basicmath} % disable protrusion for tt fonts
}{}
\usepackage[margin=1in]{geometry}
\usepackage{hyperref}
\hypersetup{unicode=true,
            pdftitle={SocialM},
            pdfborder={0 0 0},
            breaklinks=true}
\urlstyle{same}  % don't use monospace font for urls
\usepackage{color}
\usepackage{fancyvrb}
\newcommand{\VerbBar}{|}
\newcommand{\VERB}{\Verb[commandchars=\\\{\}]}
\DefineVerbatimEnvironment{Highlighting}{Verbatim}{commandchars=\\\{\}}
% Add ',fontsize=\small' for more characters per line
\usepackage{framed}
\definecolor{shadecolor}{RGB}{248,248,248}
\newenvironment{Shaded}{\begin{snugshade}}{\end{snugshade}}
\newcommand{\AlertTok}[1]{\textcolor[rgb]{0.94,0.16,0.16}{#1}}
\newcommand{\AnnotationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\AttributeTok}[1]{\textcolor[rgb]{0.77,0.63,0.00}{#1}}
\newcommand{\BaseNTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\BuiltInTok}[1]{#1}
\newcommand{\CharTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\CommentTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textit{#1}}}
\newcommand{\CommentVarTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\ConstantTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\ControlFlowTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{\textbf{#1}}}
\newcommand{\DataTypeTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{#1}}
\newcommand{\DecValTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\DocumentationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\ErrorTok}[1]{\textcolor[rgb]{0.64,0.00,0.00}{\textbf{#1}}}
\newcommand{\ExtensionTok}[1]{#1}
\newcommand{\FloatTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\FunctionTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\ImportTok}[1]{#1}
\newcommand{\InformationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\KeywordTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{\textbf{#1}}}
\newcommand{\NormalTok}[1]{#1}
\newcommand{\OperatorTok}[1]{\textcolor[rgb]{0.81,0.36,0.00}{\textbf{#1}}}
\newcommand{\OtherTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{#1}}
\newcommand{\PreprocessorTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textit{#1}}}
\newcommand{\RegionMarkerTok}[1]{#1}
\newcommand{\SpecialCharTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\SpecialStringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\StringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\VariableTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\VerbatimStringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\WarningTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\usepackage{longtable,booktabs}
\usepackage{graphicx,grffile}
\makeatletter
\def\maxwidth{\ifdim\Gin@nat@width>\linewidth\linewidth\else\Gin@nat@width\fi}
\def\maxheight{\ifdim\Gin@nat@height>\textheight\textheight\else\Gin@nat@height\fi}
\makeatother
% Scale images if necessary, so that they will not overflow the page
% margins by default, and it is still possible to overwrite the defaults
% using explicit options in \includegraphics[width, height, ...]{}
\setkeys{Gin}{width=\maxwidth,height=\maxheight,keepaspectratio}
\IfFileExists{parskip.sty}{%
\usepackage{parskip}
}{% else
\setlength{\parindent}{0pt}
\setlength{\parskip}{6pt plus 2pt minus 1pt}
}
\setlength{\emergencystretch}{3em}  % prevent overfull lines
\providecommand{\tightlist}{%
  \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}
\setcounter{secnumdepth}{0}
% Redefines (sub)paragraphs to behave more like sections
\ifx\paragraph\undefined\else
\let\oldparagraph\paragraph
\renewcommand{\paragraph}[1]{\oldparagraph{#1}\mbox{}}
\fi
\ifx\subparagraph\undefined\else
\let\oldsubparagraph\subparagraph
\renewcommand{\subparagraph}[1]{\oldsubparagraph{#1}\mbox{}}
\fi

%%% Use protect on footnotes to avoid problems with footnotes in titles
\let\rmarkdownfootnote\footnote%
\def\footnote{\protect\rmarkdownfootnote}

%%% Change title format to be more compact
\usepackage{titling}

% Create subtitle command for use in maketitle
\providecommand{\subtitle}[1]{
  \posttitle{
    \begin{center}\large#1\end{center}
    }
}

\setlength{\droptitle}{-2em}

  \title{SocialM}
    \pretitle{\vspace{\droptitle}\centering\huge}
  \posttitle{\par}
    \author{}
    \preauthor{}\postauthor{}
    \date{}
    \predate{}\postdate{}
  

\begin{document}
\maketitle

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{sm_clean =}\StringTok{ }\KeywordTok{select}\NormalTok{(social, }\OperatorTok{-}\KeywordTok{matches}\NormalTok{(}\StringTok{"uncategorized"}\NormalTok{))}
\NormalTok{sm_cleaned =}\StringTok{ }\KeywordTok{subset}\NormalTok{(sm_clean, adult }\OperatorTok{<}\StringTok{ }\DecValTok{5}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

The Median number of adult tags is 5, so we decide to take out data
points containing more than 5 adult tweets per week. also we found out
for spam, it ranges from 0-2 with mean around 0.3, so we conclude that
the filter has done a pretty good job already. We not gonna touch the
spam column or drop anything. Becasue uncategorized tags don't help in
segmentation, we drop that whole column.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{set.seed}\NormalTok{(}\DecValTok{1}\NormalTok{)}
\NormalTok{k_grid =}\StringTok{ }\KeywordTok{seq}\NormalTok{(}\DecValTok{2}\NormalTok{, }\DecValTok{20}\NormalTok{, }\DataTypeTok{by=}\DecValTok{1}\NormalTok{)}
\NormalTok{SSE_grid =}\StringTok{ }\KeywordTok{foreach}\NormalTok{(}\DataTypeTok{k =}\NormalTok{ k_grid, }\DataTypeTok{.combine=}\StringTok{'c'}\NormalTok{) }\OperatorTok{%do%}\StringTok{ }\NormalTok{\{}
\NormalTok{  cluster_k =}\StringTok{ }\KeywordTok{kmeans}\NormalTok{(sm_cleaned, k, }\DataTypeTok{nstart=}\DecValTok{50}\NormalTok{)}
\NormalTok{  cluster_k}\OperatorTok{$}\NormalTok{tot.withinss}
\NormalTok{\}}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Warning: did not converge in 10 iterations

## Warning: did not converge in 10 iterations

## Warning: did not converge in 10 iterations
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{plot}\NormalTok{(k_grid, SSE_grid)}
\end{Highlighting}
\end{Shaded}

\includegraphics{Market_Seg_Exercise_files/figure-latex/unnamed-chunk-2-1.pdf}
After seeing the results from k-means, we decide we will pick k = 7

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{k =}\StringTok{ }\DecValTok{7}
\NormalTok{cluster_k =}\StringTok{ }\KeywordTok{kmeans}\NormalTok{(sm_cleaned, k, }\DataTypeTok{nstart=}\DecValTok{50}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

K-means clustering with 7 clusters of sizes 917, 583, 475, 3533, 544,
376, 1164

\begin{Shaded}
\begin{Highlighting}[]
\ControlFlowTok{for}\NormalTok{(i }\ControlFlowTok{in} \DecValTok{1}\OperatorTok{:}\NormalTok{k) \{ }
\NormalTok{  index_temp =}\StringTok{ }\KeywordTok{which}\NormalTok{(cluster_k}\OperatorTok{$}\NormalTok{cluster }\OperatorTok{==}\StringTok{ }\NormalTok{i)}
\NormalTok{  df_temp =}\StringTok{ }\NormalTok{sm_cleaned[}\KeywordTok{c}\NormalTok{(index_temp), ]}
  \KeywordTok{assign}\NormalTok{(}\KeywordTok{paste}\NormalTok{(}\StringTok{"ddat"}\NormalTok{,i,}\DataTypeTok{sep=}\StringTok{"_"}\NormalTok{),df_temp) }
  \KeywordTok{assign}\NormalTok{(}\KeywordTok{paste}\NormalTok{(}\StringTok{"index"}\NormalTok{,i,}\DataTypeTok{sep=}\StringTok{"_"}\NormalTok{),index_temp) }
\NormalTok{\} }
\end{Highlighting}
\end{Shaded}

Now we have 7 different df for each cluster

\#\#\#A quick try on Hie-clustering

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{sm_distance_matrix =}\StringTok{ }\KeywordTok{dist}\NormalTok{(social, }\DataTypeTok{method=}\StringTok{'euclidean'}\NormalTok{)}
\NormalTok{hmin =}\StringTok{ }\KeywordTok{hclust}\NormalTok{(sm_distance_matrix, }\DataTypeTok{method=}\StringTok{'complete'}\NormalTok{)}
\NormalTok{cluster3 =}\StringTok{ }\KeywordTok{cutree}\NormalTok{(hmin, }\DataTypeTok{k=}\DecValTok{10}\NormalTok{)}
\KeywordTok{summary}\NormalTok{(}\KeywordTok{factor}\NormalTok{(cluster3))}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##    1    2    3    4    5    6    7    8    9   10 
##  347 6155  489   70  110  420  218   31   22   20
\end{verbatim}

We have tried method ``complete'' and ``single'', also k = 5-10. The
results have been disappointing because there's always one big group
that takes over majority of data points. We are showing the best one
we've got. So we decide to stick with results from K-means for now.

\begin{longtable}[]{@{}l@{}}
\toprule
\endhead
\begin{minipage}[t]{0.97\columnwidth}\raggedright
\#\#\#PCA We need to label each data with a group number (7 different
segmentations!) for later The group assignments are based on results
from k means\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.97\columnwidth}\raggedright
```r sm\_cleaned{[}`group'{]} = NA\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.97\columnwidth}\raggedright
sm\_cleaned\(group[index_1] = 'group1' sm_cleaned\)group{[}index\_2{]} =
`group2'
sm\_cleaned\(group[index_3] = 'group3' sm_cleaned\)group{[}index\_4{]} =
`group4'
sm\_cleaned\(group[index_5] = 'group5' sm_cleaned\)group{[}index\_6{]} =
`group6' sm\_cleaned\$group{[}index\_7{]} = `group7' ```\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.97\columnwidth}\raggedright
\texttt{r\ z\ =\ sm\_cleaned{[},1:35{]}\ pc1\ =\ prcomp(z,\ scale.=TRUE)}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.97\columnwidth}\raggedright
\texttt{r\ loadings\ =\ pc1\$rotation\ scores\ =\ pc1\$x\ qplot(scores{[},1{]},\ scores{[},2{]},\ color\ =\ sm\_cleaned\$group,\ xlab\ =\ \textquotesingle{}Component\ 1\textquotesingle{},\ ylab\ =\ \textquotesingle{}Component\ 2\textquotesingle{})\ +scale\_color\_colorblind()}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.97\columnwidth}\raggedright
\includegraphics{Market_Seg_Exercise_files/figure-latex/unnamed-chunk-8-1.pdf}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.97\columnwidth}\raggedright
It's obvious that there are some distinct groups such as 3, 5 and 6.
Let's do some head \& tail to analyze what component 1 \& 2
represents.\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.97\columnwidth}\raggedright
\texttt{r\ o1\ =\ order(loadings{[},1{]},\ decreasing\ =\ TRUE)\ colnames(z){[}head(o1,10){]}}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.97\columnwidth}\raggedright
\texttt{\#\#\ \ {[}1{]}\ "religion"\ \ \ \ \ \ "food"\ \ \ \ \ \ \ \ \ \ "parenting"\ \ \ \ \ "sports\_fandom"\ \#\#\ \ {[}5{]}\ "school"\ \ \ \ \ \ \ \ "family"\ \ \ \ \ \ \ \ "beauty"\ \ \ \ \ \ \ \ "crafts"\ \#\#\ \ {[}9{]}\ "cooking"\ \ \ \ \ \ \ "fashion"}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.97\columnwidth}\raggedright
\texttt{r\ colnames(z){[}tail(o1,10){]}}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.97\columnwidth}\raggedright
\texttt{\#\#\ \ {[}1{]}\ "health\_nutrition"\ "home\_and\_garden"\ \ "dating"\ \#\#\ \ {[}4{]}\ "current\_events"\ \ \ "art"\ \ \ \ \ \ \ \ \ \ \ \ \ \ "tv\_film"\ \#\#\ \ {[}7{]}\ "college\_uni"\ \ \ \ \ \ "online\_gaming"\ \ \ \ "adult"\ \#\#\ {[}10{]}\ "spam"}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.97\columnwidth}\raggedright
\texttt{r\ colnames(z){[}o1{[}20:25{]}{]}}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.97\columnwidth}\raggedright
\texttt{\#\#\ {[}1{]}\ "shopping"\ \ \ \ \ \ \ "sports\_playing"\ "chatter"\ \ \ \ \ \ \ \ "music"\ \#\#\ {[}5{]}\ "small\_business"\ "travel"}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.97\columnwidth}\raggedright
\texttt{r\ o2\ =\ order(loadings{[},2{]},\ decreasing\ =\ TRUE)\ colnames(z){[}head(o2,10){]}}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.97\columnwidth}\raggedright
\texttt{\#\#\ \ {[}1{]}\ "religion"\ \ \ \ \ \ "sports\_fandom"\ "parenting"\ \ \ \ \ "food"\ \#\#\ \ {[}5{]}\ "school"\ \ \ \ \ \ \ \ "family"\ \ \ \ \ \ \ \ "news"\ \ \ \ \ \ \ \ \ \ "automotive"\ \#\#\ \ {[}9{]}\ "adult"\ \ \ \ \ \ \ \ \ "crafts"}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.97\columnwidth}\raggedright
\texttt{r\ colnames(z){[}tail(o2,10){]}}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.97\columnwidth}\raggedright
\texttt{\#\#\ \ {[}1{]}\ "outdoors"\ \ \ \ \ \ \ \ \ "health\_nutrition"\ "personal\_fitness"\ \#\#\ \ {[}4{]}\ "music"\ \ \ \ \ \ \ \ \ \ \ \ "chatter"\ \ \ \ \ \ \ \ \ \ "beauty"\ \#\#\ \ {[}7{]}\ "shopping"\ \ \ \ \ \ \ \ \ "fashion"\ \ \ \ \ \ \ \ \ \ "cooking"\ \#\#\ {[}10{]}\ "photo\_sharing"}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.97\columnwidth}\raggedright
\texttt{r\ colnames(z){[}o2{[}20:25{]}{]}}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.97\columnwidth}\raggedright
\texttt{\#\#\ {[}1{]}\ "online\_gaming"\ \ "eco"\ \ \ \ \ \ \ \ \ \ \ \ "small\_business"\ "sports\_playing"\ \#\#\ {[}5{]}\ "business"\ \ \ \ \ \ \ "college\_uni"}\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.97\columnwidth}\raggedright
Seperate them into individual plots to see lcearly\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.97\columnwidth}\raggedright
```r sm.group = sm\_cleaned\$group\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.97\columnwidth}\raggedright
qplot(scores{[},1{]}, scores{[},2{]}, facets=\textasciitilde{}sm.group,
xlab = `Component 1', ylab = `Component 2') ```\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.97\columnwidth}\raggedright
\includegraphics{Market_Seg_Exercise_files/figure-latex/unnamed-chunk-10-1.pdf}
Group3 is closer to head of PC1 and PC2 than any other groups.
``religion'' ``food'' ``parenting'' ``sports\_fandom'' ``school''
``family'' ``beauty'' ``crafts'' ``cooking'' ``fashion''\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.97\columnwidth}\raggedright
``religion'' ``sports\_fandom'' ``parenting'' ``food'' ``school''
``family'' ``news'' ``automotive'' ``adult'' ``crafts''\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.97\columnwidth}\raggedright
We conclude that this group should be more family oriented, older adults
who's already married.\strut
\end{minipage}\tabularnewline
\bottomrule
\end{longtable}

Group6 is close to PC1 tail and PC2 middle: ``dating''
``current\_events'' ``art'' ``tv\_film'' ``college\_uni''
``online\_gaming'' ``adult'' ``spam'' ``computers'' ``travel''
``tv\_film'' ``dating'' ``current\_events'' ``online\_gaming''

\hypertarget{we-conclude-this-group-is-close-to-college-students-young-single-adults.}{%
\subsection{We conclude this group is close to college students, young
single
adults.}\label{we-conclude-this-group-is-close-to-college-students-young-single-adults.}}

Group 5 is close to tail of PC 2: ``health\_nutrition''
``personal\_fitness'' ``music'' ``chatter'' ``beauty'' ``shopping''
``fashion'' ``cooking'' ``photo\_sharing''

\hypertarget{we-conclude-this-group-as-working-woman-or-our-mum-group}{%
\subsection{We conclude this group as working woman, or our ``mum''
group}\label{we-conclude-this-group-as-working-woman-or-our-mum-group}}

Other clusters that were kinda in the middles, pretty similar:

They do contain some unique features that stood out, such as
``business'',``small business'', and ``news'' that were not as common as
other groups. So we identify these groups as various working class, hard
workers, or entrepreneur.


\end{document}
